package com.example.scheduleapplicationimport android.content.Intentimport androidx.appcompat.app.AppCompatActivityimport android.os.Bundleimport androidx.activity.viewModelsimport androidx.lifecycle.Observerimport androidx.recyclerview.widget.DividerItemDecorationimport androidx.recyclerview.widget.LinearLayoutManagerimport kotlinx.android.synthetic.main.activity_main.*import kotlinx.android.synthetic.main.activity_select_schedule_data.*import kotlinx.android.synthetic.main.activity_set_schedule_data.*import java.util.*class MainActivity : AppCompatActivity() {    private val scheduleViewModel: ScheduleViewModel by viewModels()    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_main)        setSupportActionBar(mainActivityToolbar)        supportActionBar?.setDisplayHomeAsUpEnabled(false)        supportActionBar?.title = ""        mainActivityToolbarText.text = "シンプルスケジュール帳" // ツールバーのタイトルを表示        // dayRecyclerViewの設定        val adapter = DayScheduleListAdapter(this)        val itemDecoration = DividerItemDecoration(this, DividerItemDecoration.VERTICAL)        dayRecyclerView.adapter = adapter        dayRecyclerView.addItemDecoration(itemDecoration)        dayRecyclerView.layoutManager = LinearLayoutManager(this) // 各セルを縦に並べる        // 日付と日付のカウント数の内容の変更を検知        scheduleViewModel.countDate.observe(this, Observer {            adapter.setSchedule(it) // dayRecyclerViewを再設定        })        // dayRecyclerViewのセルをタップ時、SelectScheduleDataActivityに画面遷移        adapter.setOnItemClickListener { countDate ->            val date = countDate.date // タップされたセルの日付を取得            val intent = Intent(this@MainActivity, SelectScheduleDataActivity::class.java)            intent.putExtra("SCHEDULE_DATE", date) // 遷移先にタップされた日付を送る            startActivity(intent)        }        // カレンダーをタップした時、SelectScheduleDataActivityに画面遷移        calendarView.setOnDateChangeListener{ _, year, month, dayOfMonth ->            val nextMonth = month.toInt() + 1 // １か月進める            val date = "$year/$nextMonth/$dayOfMonth"            val intent = Intent(this@MainActivity, SelectScheduleDataActivity::class.java)            intent.putExtra("SCHEDULE_DATE", date) // 遷移先にタップされた日付を送る            startActivity(intent)        }    }}